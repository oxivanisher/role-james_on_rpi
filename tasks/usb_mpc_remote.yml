---

# the lord and saviour http://vay8.net/ebindkeys#downloads
- name: putting ebindkeysrc config in place
  ansible.builtin.copy:
    src: ebindkeysrc
    dest: /etc/ebindkeysrc
    owner: root
    group: root
    mode: 0644

- name: putting ebindkeysrc binary in place
  ansible.builtin.copy:
    src: ebindkeys-arm-static
    dest: /usr/local/bin/ebindkeys
    owner: root
    group: root
    mode: 0755

# upstart (thx and fuck you, xbian)
- name: putting usb_mpc_remote upstart file in place
  ansible.builtin.copy:
    src: usb_mpc_remote.conf
    dest: /etc/init/usb_mpc_remote.conf
    owner: root
    group: root
    mode: 0644
  when: ansible_service_mgr == "upstart"

- name: start usb_mpc_remote service
  ansible.builtin.service:
    name: usb_mpc_remote
    state: started
    enabled: yes
  when: ansible_service_mgr == "upstart"

# systemd
- name: install ebindkeys systemd unit file
  ansible.builtin.copy:
    src: ebindkeys.service
    dest: /etc/systemd/system/ebindkeys.service
    owner: root
    group: root
    mode: 0755
  when: ansible_service_mgr == "systemd"

- name: reload systemd
  ansible.builtin.systemd:
    daemon_reload: yes
  when: ansible_service_mgr == "systemd"

- name: enable and start ebindkeys service
  ansible.builtin.service:
    name: ebindkeys.service
    state: started
    enabled: yes
  when: ansible_service_mgr == "systemd"
